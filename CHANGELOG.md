# 更新日志

## `2.1.5`

> 更新于 `2017-12-29`

* 更新启动工具，由 `forever` 变更为 `pm2`
* 后台接口
  * 关于
    * 新增 `PUT` 修改关于信息

## `2.1.4`

> 更新于 `2017-12-27`

* 新增视频时长同步脚本
* 新增横幅栏同步脚本
* 新增循环视频同步脚本
* 移除后台的渲染
* 客户端接口
  * 个人中心
    * 新增 `GET` 获取当前用户收藏的视频列表
    * 新增 `GET` 获取当前用户喜欢的视频列表
    * 新增 `POST` 发送重置密码验证码
    * 新增 `POST` 验证重置密码验证码
    * 新增 `PUT` 重置用户密码
  * 视频
    * 更新属性 `collected` → `collectAt`
    * 更新属性 `favoured` → `favourAt`
    * 新增 `GET` 获取视频列表 接口查询参数：`recommendAt`
    * 新增 `GET` 随机获取视频 接口查询参数：`recommendAt`
  * 横幅栏
    * 更新 `GET` 获取横幅栏列表
    * 新增 `GET` 获取横幅栏信息
  * 循环视频
    * 更新 `GET` 获取循环视频列表
  * 关于
    * 新增 `GET` 获取信息列表
* 后台接口
  * 关于
    * 新增 `GET` 获取关于信息列表
    * 新增 `GET` 获取关于信息
    * 新增 `POST` 创建关于信息
    * 新增 `POST` 发布关于信息
    * 新增 `POST` 恢复关于信息
    * 新增 `DEL` 冻结关于信息
    * 新增 `DEL` 删除关于信息

> 更新于 `2017-12-29`

* 内容管理系统接口
  * 接口 `GET` 获取用户列表 新增 `searchName` 查询参数

## `2.1.3`

> 更新于 `2017-12-22`

* 重写了内容同步脚本
* 新增用户迁移脚本
* 内容管理系统接口
  - 用户
    * 新增 `GET` 获取用户列表
    * 新增 `GET` 获取用户信息
    * 新增 `PUT` 修改用户信息
    * 新增 `PUT` 修改用户头像
* 客户端接口
  - 频道
    * 新增 `GET` 获取频道信息
    * 更新 `GET` 获取频道列表
    * 移除了 `GET` 获取频道分类列表
  - 分类
    * 新增 `GET` 获取分类列表
    * 新增 `GET` 获取分类信息
  - 视频
    * 更新 `GET` 获取视频列表
    * 更新 `GET` 获取视频信息
    * 更新 `GET` 随机获取视频
    * 更新 `PUT` 收藏视频
    * 更新 `PUT` 点赞视频
    * 更新 `DEL` 取消收藏视频
    * 更新 `DEL` 取消点赞视频
    * 移除 `GET` 搜索视频

## `2.1.2`

> 更新于 `2017-12-12`

* 修正了一个导致排序不能够正常运作的问题

## `2.1.1`

> 更新于 `2017-11-24`

* `Video` 模型
  - 移除 `sourceId` 属性
  - 新增 `source`, `screenshots` 属性
  - 现在 `cover` 属性指向为七牛云的存储键
* 后台接口
  - 个人中心
    + 新增 `GET` 获取我的信息
    + 新增 `POST` 登录
    + 新增 `PUT` 更新我的信息
    + 新增 `PUT` 更新我的头像
    + 新增 `DEL` 登出

## `2.1.0`

> 更新于 `2017-11-10`

* Node 环境升级为 `~8.9.0`
* 源码将引入 `async/await` 机制
* 接口
  - 客户端
    + 七牛
      * 新增 `GET` 获取上传令牌
    + 用户
      * 移除 `GET` 获取当前登录用户详情
      * 移除 `GET` 获取当前用户点赞的视频列表
      * 移除 `GET` 获取当前用户收藏的视频列表
      * 移除 `POST` 登录（手机号、密码）
      * 移除 `POST` 刷新验证 keys
      * 移除 `POST` 发送验证码
      * 移除 `POST` 验证短信验证码
      * 移除 `POST` 发送重置密码验证码
      * 移除 `POST` 验证重置密码验证码
      * 移除 `POST` 上传登录用户头像
      * 移除 `PUT` 重置用户密码
      * 移除 `PUT` 更新当前用户信息
      * 移除 `DEL` 用户登出
      * 移除 `DEL` 删除登录用户点赞视频
      * 移除 `DEL` 删除登录用户收藏视频
    + 个人中心 **(新增)**
      * 新增 `GET` 获取我的资料
      * 新增 `POST` 使用手机/密码登录
      * 新增 `POST` 使用微信登录
      * 新增 `POST` 发送注册验证码
      * 新增 `POST` 验证注册验证码
      * 新增 `POST` 注册
      * 新增 `PUT` 绑定微信
      * 新增 `PUT` 更新我的资料
      * 新增 `PUT` 更新我的头像
      * 新增 `DELETE` 登出

## `2.0.2`

* 后台模板更新至 `2.0.2`

## `2.0.1`

> 更新于 `2017-10-20`

* 接口
  - 后台接口
    + 获取横幅栏列表现在注入了视频信息
* 后台模板更新至 `2.0.1`

## `2.0.0`

> 更新于 `2017-10-13`

* 移除陈旧的源代码
* 后台模板更新至 `2.0.0`

## `1.3.0`

> 更新于 `2017-09-22`

* 更新了 `Category` 模型
* 更新了 `Channel` 模型
* 更新了 `LoopVideo` 模型
* 接口
  - 重新设计了控制台输出日志
  - 后台接口
    + 以下接口接入统计功能
      * `账号`
      * `横幅栏`
      * `频道`
      * `分类`
      * `循环视频`
      * `我的账号`
      * `用户`
      * `视频`
* 现在访问 http://cms.fashionworldcn.com/ 会重定向至 http://cms.fashionworldcn.com/admin
* 添加生产环境配置
* ***正式环境*** 短信签名统一为 `正辰科技`

## `1.2.5`

> 更新于 `2017-09-15`

* 接口
  - 后台接口
    + 添加 `用户 - 获取用户列表` 接口
    + 添加 `用户 - 获取用户详情` 接口
    + 添加 `我的账号 - 获取我的账号信息` 接口
    + 添加 `我的账号 - 上传我的头像` 接口
    + 添加 `我的账号 - 更新我的信息` 接口
* 后台更新到 `1.1.4`

## `1.2.4`

> 更新于 `2017-09-07`

* 接口
  - 后台接口
    + 添加 循环视频 - 上传封面 接口
    + 重写了后台账号接口，现支持日志统计
* 模型
  - 新增 `AccountLog` 模型
  - 优化 `Account` 模型
  - 优化 `User` 模型
* 自动化脚本
  - 新增移除空循环视频脚本
* 后台更新到 `1.1.3`

## `1.2.3`

> 更新于 `2017-09-01`

* 接口
  - 客户端接口
    + 修正了上传头像接口未正确传入 `authorization` 信息导致的 `500` 问题
  - 后台接口
    + 新增循环视频各级接口
    + 横幅 - 获取横幅列表
      * 新增查询参数 `categoryId`
      * 修正了查询参数 `type` 无效的问题
    + 横幅 - 修改横幅
      * 现在能够修改 `categoryId` 了
      * 现在会返回 `channel`, `category` 信息

* 自动化脚本
  - DEEP 视频元信息导入脚本
    + 更新了 Metadata 文件
  - 更新了导入 FashionOne 视频的脚本


* 更新后台到 `v1.1.2`

## `1.2.2`

> `2017-08-25`

* 接口
  - 客户端接口
    + 修正了用户头像显示不正常的问题
    + 修正了上传头像会报 `500` 的错误
    + 横幅 - 获取横幅列表
      * 新增 `categoryId` 过滤参数
  - 后台接口
    + 修正了视频列表无法正常使用过滤参数的问题
    + 新增上传横幅栏封面接口
* 自动化脚本
  - 新增重新读取视频元信息脚本
  - 新增 Fashion One 视频导入脚本
  - 新增 DEEP 视频元信息导入脚本
* 后台
  - 版本更新至 `1.1.1`

## `1.2.1`

* 自动化脚本
  - 添加视频截图作为视频封面的处理脚本
* 接口
  - 新增调试模式
  - 客户端接口
    + 现在拥有请求 Body 的请求默认均当做 Header 添加了 `Content-Type: application/json`
    + 添加 `POST 上传登录用户头像` 接口
  - 后台接口
    + 修正了 `GET 获取视频列表` 接口无法搜索标题的问题
    + 修正了 `GET 获取视频列表` 接口传入查询参数 `channelId`, `categoryId` 无效的问题

## `1.2.0`

> 更新于 `2017-07-07`

* 新增接口
  * `GET` 获取频道列表
  * `GET` 获取频道详情
  * `GET` 获取频道分类列表
* 移除了视频下的频道 & 分类接口

## `1.1.1`

> 更新于 `2017-07-04`

* 新增搜索视频接口

## `1.1.0`

> 更新于 `2017-06-30`

* 更新 `POST` 登录（手机号、密码）接口
* 重新设计了用户接口

## `1.0.6`

> 更新于 `2017-06-29`

* 新增 `GET` CMS - 获取视频频道列表接口
* 新增 `GET` CMS - 获取视频分类列表
* 新增 `GET` 获取 Live 视频列表接口
* 新增 `DELETE` 取消视频点赞接口
* 修正 `GET` 获取视频列表接口中继续显示已经下架的频道、分类的问题

## `1.0.5`

> 更新于 `2017-06-23`

* 新增 [`GET` 随机获取推荐视频列表](./docs/api/video/get.fetch-recommend-video-list.md) 接口

## `1.0.4`

> 更新于 `2017-06-16`

* 修改 `Video` 模型
* 新增 `视频 - 获取视频列表` 接口查询参数：`isRecommend`, `channelId`, `categoryId`
* 新增 [`GET` 获取横幅列表](./docs/api/banner/get.fetch-banner-list.md) 接口
* 新增 [`POST` 用户 - 验证短信验证码](./docs/api/user/post.validate-code.md) 接口
* 新增 [`POST` 验证重置密码验证码](./docs/api/user/post.validate-reset-password-code.md) 接口
* 现在将频道 `Fashion TV`, `Fashion One` 固定
* 现在发送验证码均可以发送到手机了
* 现在在 **测试环境** 下单个手机可以重复注册了

## `1.0.3`

> 更新于 `2017-06-08`

* 新增 `后台 - 账号 - 列表` 接口
* 新增 `后台 - 账号 - 更新` 接口
* 新增 `后台 - 账号 - 移除` 接口
* 新增 `后台 - 视频 - 列表` 接口
* 新增 `后台 - 视频 - 资料` 接口
* 新增 `Video` 模型字段: `views`, `collections`

## `1.0.2`

> 更新于 `2017-05-31`

* 新增 `视频 - 获取视频列表` 接口
* 新增 `视频 - 获取视频详情` 接口
* 新增文档：
  * Model
    * [Video](./docs/models/video.md)
  * API
    * [`GET` 获取视频列表](./docs/api/video/get.get-video-list.md)
    * [`GET` 获取视频详情](./docs/api/video/get.get-video-profile.md)

## `1.0.1`

> 更新于 `2017-05-16`

* 源码优化
* 新增 `个人资料` 接口
* 新增 `用户登录` 接口

## `1.0.0`

> 更新于 `2017-05-15`

* 新增 `用户登录（手机号、密码）` 接口
* 新增 `账户登录` 接口
* 新增 `账户登出` 接口
